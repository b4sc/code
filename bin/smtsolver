#!python3

import argparse
import smtquery.solvers
import smtquery.config
import smtquery.storage.smt.fs
import smtquery.scheduling


parser = argparse.ArgumentParser()
parser.add_argument ('--confloc',dest="conf",type=str,default="./data/conf")
parser.add_argument ('solver',type=str,default="CVC4")
parser.add_argument ('benchmark',type=str,default="dummbench")
parser.add_argument ('track',type=str,default="track")
parser.add_argument ('smtfile',type=str,default="model")


args = parser.parse_args ()

filelocator = smtquery.config.FileLocator ([args.conf])
solvers,schedule,storage = smtquery.config.readConfig (args.conf)

solver = solvers[args.solver]

file = storage.searchFile (args.benchmark,args.track,args.smtfile)
if file:
    res = schedule.runSolver (solver,file,None)#solver.runSolver (file)
    res.wait ()
    print (schedule.interpretSolverRes (res))
    


